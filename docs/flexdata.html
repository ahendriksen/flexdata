

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Modules &mdash; flexdata  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="flexDATA" href="readme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> flexdata
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">flexDATA</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#flexdata-geometry-module">flexdata.geometry module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-flexdata.data">flexdata.data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-flexdata.display">flexdata.display module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">flexdata</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Modules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/flexdata.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>flexDATA includes three modules: geometry, data and display.</p>
<p>A wide range of acquisition geometries can be defined using the geometry module. For I/O operations and some utilities for out-of-memory arrays are implemented in the data module. Basic display utilities can be found in display module.</p>
<div class="section" id="flexdata-geometry-module">
<h2>flexdata.geometry module<a class="headerlink" href="#flexdata-geometry-module" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-flexdata.geometry"></span><p>This module contains acquisition geometry classes: circular, linear, helical.
The circular class corresponds to the simplest case of circular orbit cone-beam CT with minimal number of parameters.
Additional parameters can be use to define a non-conventional geometry.
For instance: offsets and rotations (‘det_roll’, ‘det_tan’, ‘det_ort’, etc.), axis tilts (‘axs_roll’, ‘axs_pitch’),
volume transformations (‘vol_tra’, ‘vol_rot’), recostruction resolution and anisotropic sampling (‘img_pixel’, ‘det_sample’, ‘vol_sample’).</p>
<dl class="function">
<dt id="flexdata.geometry.astra_projection_geom">
<code class="descclassname">flexdata.geometry.</code><code class="descname">astra_projection_geom</code><span class="sig-paren">(</span><em>geom</em>, <em>data_shape</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#astra_projection_geom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.astra_projection_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize ASTRA projection geometry.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>geom      : geometry class
data_shape: [detector_count_z, theta_count, detector_count_x]
index     : if provided - sequence of the rotation angles</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.astra_volume_geom">
<code class="descclassname">flexdata.geometry.</code><code class="descname">astra_volume_geom</code><span class="sig-paren">(</span><em>geom</em>, <em>vol_shape</em>, <em>slice_first=None</em>, <em>slice_last=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#astra_volume_geom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.astra_volume_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize ASTRA volume geometry.</p>
</dd></dl>

<dl class="class">
<dt id="flexdata.geometry.basic">
<em class="property">class </em><code class="descclassname">flexdata.geometry.</code><code class="descname">basic</code><span class="sig-paren">(</span><em>src2obj=None</em>, <em>det2obj=None</em>, <em>det_pixel=None</em>, <em>img_pixel=None</em>, <em>unit='mm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base geometry class. Needs only SDD, ODD and pixel size to initialize.
Use ‘parameters’ to store parameters and ‘description’ to store relevant metadata.</p>
<dl class="method">
<dt id="flexdata.geometry.basic.astra_projection_geom">
<code class="descname">astra_projection_geom</code><span class="sig-paren">(</span><em>data_shape</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.astra_projection_geom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.astra_projection_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ASTRA projection geometry.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>data_shape: [detector_count_z, theta_count, detector_count_x]
index     : if provided - sequence of the rotation angles</dd>
<dt>Returns:</dt>
<dd>geometry : ASTRA cone-beam geometry.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.astra_volume_geom">
<code class="descname">astra_volume_geom</code><span class="sig-paren">(</span><em>vol_shape</em>, <em>slice_first=None</em>, <em>slice_last=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.astra_volume_geom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.astra_volume_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize ASTRA volume geometry.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>vol_shape  : volume array shape
slice_first: first slice of an ROI to update
slice_last : last slice of an ROI to update</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy me.</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.det2obj">
<code class="descname">det2obj</code><a class="headerlink" href="#flexdata.geometry.basic.det2obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Detector-to-object distance.</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.det_sample">
<code class="descname">det_sample</code><a class="headerlink" href="#flexdata.geometry.basic.det_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Pixel shape.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.detector_bounds">
<code class="descname">detector_bounds</code><span class="sig-paren">(</span><em>proj_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.detector_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.detector_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the boundaries of the detector at the start of the scan in length units.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.detector_centre">
<code class="descname">detector_centre</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.detector_centre"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.detector_centre" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the centre coordinate of the first position of the detector.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.detector_size">
<code class="descname">detector_size</code><span class="sig-paren">(</span><em>proj_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.detector_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.detector_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of detector in length units.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.from_astra_cone_vec">
<code class="descname">from_astra_cone_vec</code><span class="sig-paren">(</span><em>vectors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.from_astra_cone_vec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.from_astra_cone_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Take vectors from ASTRA ‘cone_vec’ geometry. This will override any other parameters.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.from_dictionary">
<code class="descname">from_dictionary</code><span class="sig-paren">(</span><em>dictionary</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.from_dictionary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.from_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Use dictionary records to initialize this geometry.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.from_matrix">
<code class="descname">from_matrix</code><span class="sig-paren">(</span><em>R</em>, <em>T</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.from_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.from_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates and translates the reconstruction volume.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>R (3x3 array): rotation matrix
T (1x3 array): translation vector</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.get_detector_orbit">
<code class="descname">get_detector_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.get_detector_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.get_detector_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the detector orbit. In the base class it is a circular orbit.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>proj_count: number of projections
index           : index of the projection subset</dd>
<dt>Returns:</dt>
<dd>src_pos : array of the source positions. Can be generated by circular_orbit(…), for instance.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.get_source_orbit">
<code class="descname">get_source_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.get_source_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.get_source_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the source orbit. In the base class it is a circular orbit.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>proj_count: number of projections
index           : index of the projection subset</dd>
<dt>Returns:</dt>
<dd>src_pos : array of the source positions. Can be generated by circular_orbit(…), for instance.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.get_vectors">
<code class="descname">get_vectors</code><span class="sig-paren">(</span><em>proj_count</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.get_vectors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.get_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get source, detector and detector orientation vectors.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>angle_count : number of rotation angles
index       : index of angles that should be used</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.magnification">
<code class="descname">magnification</code><a class="headerlink" href="#flexdata.geometry.basic.magnification" title="Permalink to this definition">¶</a></dt>
<dd><p>Magnification.</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.pixel">
<code class="descname">pixel</code><a class="headerlink" href="#flexdata.geometry.basic.pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Pixel size (mm).</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.src2det">
<code class="descname">src2det</code><a class="headerlink" href="#flexdata.geometry.basic.src2det" title="Permalink to this definition">¶</a></dt>
<dd><p>Source-to-detector distance.</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.src2obj">
<code class="descname">src2obj</code><a class="headerlink" href="#flexdata.geometry.basic.src2obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Source-to-object distance.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.to_dictionary">
<code class="descname">to_dictionary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.to_dictionary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.to_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary describing this geometry.</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.vol_sample">
<code class="descname">vol_sample</code><a class="headerlink" href="#flexdata.geometry.basic.vol_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Voxel shape.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.volume_bounds">
<code class="descname">volume_bounds</code><span class="sig-paren">(</span><em>vol_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.volume_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.volume_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return volume bounds:</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.volume_size">
<code class="descname">volume_size</code><span class="sig-paren">(</span><em>vol_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.volume_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.volume_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return volume size in length units.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.basic.volume_xyz">
<code class="descname">volume_xyz</code><span class="sig-paren">(</span><em>shape, offset=[0.0, 0.0, 0.0]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#basic.volume_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.basic.volume_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinate grid in units of the geometry.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>shape : volume shape
offset: offset in length units</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.geometry.basic.voxel">
<code class="descname">voxel</code><a class="headerlink" href="#flexdata.geometry.basic.voxel" title="Permalink to this definition">¶</a></dt>
<dd><p>Voxel size (mm).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flexdata.geometry.circular">
<em class="property">class </em><code class="descclassname">flexdata.geometry.</code><code class="descname">circular</code><span class="sig-paren">(</span><em>src2obj=None</em>, <em>det2obj=None</em>, <em>det_pixel=None</em>, <em>img_pixel=None</em>, <em>ang_range=(0</em>, <em>360)</em>, <em>unit='mm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#circular"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.circular" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#flexdata.geometry.basic" title="flexdata.geometry.basic"><code class="xref py py-class docutils literal notranslate"><span class="pre">flexdata.geometry.basic</span></code></a></p>
<p>Circular orbit geometry class. Includes additional parameters such as detector and source shifts and rotations.</p>
<dl class="method">
<dt id="flexdata.geometry.circular.get_detector_orbit">
<code class="descname">get_detector_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#circular.get_detector_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.circular.get_detector_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the detector orbit.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>proj_count: number of projections
index           : index of the projection subset</dd>
<dt>Returns:</dt>
<dd>det_pos : array of the detector positions.
det_tan : array of detector tangential directional vector
det_rad : array of detector radial directional vector
det_orth: array of detector orthogonal directional vector</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.circular.get_source_orbit">
<code class="descname">get_source_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#circular.get_source_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.circular.get_source_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the source orbit.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>proj_count: number of projections
index     : index of the projection subset</dd>
<dt>Returns:</dt>
<dd>src_pos : array of the source positions.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.circular.get_thetas">
<code class="descname">get_thetas</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#circular.get_thetas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.circular.get_thetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rotation angles. Either returns an equidistant array or self.thetas if that is defined.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>proj_count : number of angles in equidistant case. Not used if ‘thetas’ are defined explicitly in parameters.</dd>
<dt>Returns:</dt>
<dd>thetas : angle array in degrees</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.circular_orbit">
<code class="descclassname">flexdata.geometry.</code><code class="descname">circular_orbit</code><span class="sig-paren">(</span><em>radius, thetas, roll=0, pitch=0, yaw=0, origin=[0, 0, 0], tan_shift=0, index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#circular_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.circular_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a circular orbit vector.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>radius     : orbit radius
angle_count: number of rotation angles
roll, pitch: define orientation of the rotation axis
yaw        : initial angular position
origin     : xyz vector of the orbit centre
tan_shift  : tangential shift from the default position (scalar or array)
index      : index of the subset of total rotation angles</dd>
<dt>Returns:</dt>
<dd>position   : position vector
tangent    : tangent direction
radius     : radal direction
orthogonal : orthogonal direction</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.detector_bounds">
<code class="descclassname">flexdata.geometry.</code><code class="descname">detector_bounds</code><span class="sig-paren">(</span><em>geom</em>, <em>proj_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#detector_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.detector_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the boundaries of the detector in length units.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.detector_size">
<code class="descclassname">flexdata.geometry.</code><code class="descname">detector_size</code><span class="sig-paren">(</span><em>geom</em>, <em>proj_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#detector_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.detector_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of detector in length units.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.get_vectors">
<code class="descclassname">flexdata.geometry.</code><code class="descname">get_vectors</code><span class="sig-paren">(</span><em>geom</em>, <em>angle_count</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#get_vectors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.get_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get source, detector and detector orientation vectors.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>geom       : geometry class
angle_count : number of rotation angles
index       : index of angles that should be used</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="flexdata.geometry.helical">
<em class="property">class </em><code class="descclassname">flexdata.geometry.</code><code class="descname">helical</code><span class="sig-paren">(</span><em>src2obj=None</em>, <em>det2obj=None</em>, <em>det_pixel=None</em>, <em>img_pixel=None</em>, <em>axis_range=(0</em>, <em>100)</em>, <em>ang_range=(0</em>, <em>720)</em>, <em>unit='mm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#helical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.helical" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#flexdata.geometry.circular" title="flexdata.geometry.circular"><code class="xref py py-class docutils literal notranslate"><span class="pre">flexdata.geometry.circular</span></code></a></p>
<p>Helical orbit geometry class. Similar to the ‘circular’ class with additional parameter of helix</p>
<dl class="method">
<dt id="flexdata.geometry.helical.get_detector_orbit">
<code class="descname">get_detector_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#helical.get_detector_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.helical.get_detector_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the detector orbit. In the base class it is a circular orbit.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.helical.get_source_orbit">
<code class="descname">get_source_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#helical.get_source_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.helical.get_source_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the source orbit. In the base class it is a circular orbit.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flexdata.geometry.linear">
<em class="property">class </em><code class="descclassname">flexdata.geometry.</code><code class="descname">linear</code><span class="sig-paren">(</span><em>src2obj=None</em>, <em>det2obj=None</em>, <em>det_pixel=None</em>, <em>img_pixel=None</em>, <em>src_hrz_rng=(0</em>, <em>1)</em>, <em>src_vrt_rng=(0</em>, <em>1)</em>, <em>det_hrz_rng=(1</em>, <em>0)</em>, <em>det_vrt_rng=(1</em>, <em>0)</em>, <em>unit='mm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#linear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.linear" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#flexdata.geometry.basic" title="flexdata.geometry.basic"><code class="xref py py-class docutils literal notranslate"><span class="pre">flexdata.geometry.basic</span></code></a></p>
<p>A simple linear orbit geometry class.</p>
<dl class="method">
<dt id="flexdata.geometry.linear.get_detector_orbit">
<code class="descname">get_detector_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#linear.get_detector_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.linear.get_detector_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the detector orbit. In the base class it is a circular orbit.</p>
</dd></dl>

<dl class="method">
<dt id="flexdata.geometry.linear.get_source_orbit">
<code class="descname">get_source_orbit</code><span class="sig-paren">(</span><em>proj_count=None</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#linear.get_source_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.linear.get_source_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the source orbit. In the base class it is a circular orbit.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.linear_orbit">
<code class="descclassname">flexdata.geometry.</code><code class="descname">linear_orbit</code><span class="sig-paren">(</span><em>hrz_rng</em>, <em>rad_rng</em>, <em>vrt_rng</em>, <em>proj_count</em>, <em>index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#linear_orbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.linear_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a linear orbit vector.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>hrz_rng: horizontal range of motion
rad_rng: radial range of motion
vrt_rng: vertical range of motion</dd>
<dt>Returns:</dt>
<dd>position   : position vector
tangent    : tangent direction
radius     : radal direction
orthogonal : orthogonal direction</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.tiles_shape">
<code class="descclassname">flexdata.geometry.</code><code class="descname">tiles_shape</code><span class="sig-paren">(</span><em>shape</em>, <em>geometry_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#tiles_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.tiles_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the size of the stiched dataset.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>shape: shape of a single projection stack.
geometry_list: list of geometries.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.volume_bounds">
<code class="descclassname">flexdata.geometry.</code><code class="descname">volume_bounds</code><span class="sig-paren">(</span><em>geom</em>, <em>proj_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#volume_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.volume_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>A very simplified version of volume bounds…</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.geometry.volume_shape">
<code class="descclassname">flexdata.geometry.</code><code class="descname">volume_shape</code><span class="sig-paren">(</span><em>geom</em>, <em>proj_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/geometry.html#volume_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.geometry.volume_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on physical volume bnounds compute shape in pixels:</p>
</dd></dl>

</div>
<div class="section" id="module-flexdata.data">
<span id="flexdata-data-module"></span><h2>flexdata.data module<a class="headerlink" href="#module-flexdata.data" title="Permalink to this headline">¶</a></h2>
<p>This module contains some input / output routines for stacks of images and parsers for translating scanner log files into geometry definitions.</p>
<p>Most of the basic image formats are supported through imageio module.
Raw binaries and matlab binary files can be loaded.</p>
<p>Utility functions to hande big arrays of data. All routines support memmap arrays.
However, some operations will need enough memory for at least one copy of the data for intermediate
results. This can be improved through better use of memmaps.</p>
<dl class="function">
<dt id="flexdata.data.add_dim">
<code class="descclassname">flexdata.data.</code><code class="descname">add_dim</code><span class="sig-paren">(</span><em>array_1</em>, <em>array_2</em>, <em>dim=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#add_dim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.add_dim" title="Permalink to this definition">¶</a></dt>
<dd><p>Add two arrays with arbitrary dimensions. We assume that one or two dimensions match.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.anyslice">
<code class="descclassname">flexdata.data.</code><code class="descname">anyslice</code><span class="sig-paren">(</span><em>array</em>, <em>index</em>, <em>dim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#anyslice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.anyslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice an array along an arbitrary dimension.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.autocorrelation">
<code class="descclassname">flexdata.data.</code><code class="descname">autocorrelation</code><span class="sig-paren">(</span><em>array</em>, <em>axes=(0</em>, <em>1</em>, <em>2)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#autocorrelation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.autocorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute autocorrelation.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.bin">
<code class="descclassname">flexdata.data.</code><code class="descname">bin</code><span class="sig-paren">(</span><em>array</em>, <em>dim=None</em>, <em>geometry=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#bin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple binning of the data along the chosen direction.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.cast2shape">
<code class="descclassname">flexdata.data.</code><code class="descname">cast2shape</code><span class="sig-paren">(</span><em>array</em>, <em>shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#cast2shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.cast2shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the array to conform with the given shape.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.cast2type">
<code class="descclassname">flexdata.data.</code><code class="descname">cast2type</code><span class="sig-paren">(</span><em>array</em>, <em>dtype</em>, <em>bounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#cast2type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.cast2type" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast from float to int or float to float rescaling values if needed.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.convolve_filter">
<code class="descclassname">flexdata.data.</code><code class="descname">convolve_filter</code><span class="sig-paren">(</span><em>array</em>, <em>filtr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#convolve_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.convolve_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a filter defined in Fourier space (a CTF) via convolution.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>array : data array (implicit)
filtr : a filter defined in Fourier space (1D - 3D)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.convolve_kernel">
<code class="descclassname">flexdata.data.</code><code class="descname">convolve_kernel</code><span class="sig-paren">(</span><em>array</em>, <em>kernel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#convolve_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.convolve_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a kernel defined in real space (center in the center of the array) via convolution.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>array (ndarray)  : data array (implicit)
kernel(ndarray)  : real space kernel (1D - 3D)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.crop">
<code class="descclassname">flexdata.data.</code><code class="descname">crop</code><span class="sig-paren">(</span><em>array</em>, <em>dim</em>, <em>width</em>, <em>geometry=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#crop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop an array along the given dimension. Provide geometry if cropping the projection data,
it will update the detector center.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.deconvolve_filter">
<code class="descclassname">flexdata.data.</code><code class="descname">deconvolve_filter</code><span class="sig-paren">(</span><em>array</em>, <em>filtr</em>, <em>epsilon</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#deconvolve_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.deconvolve_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse convolution with Tikhonov regularization.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>array (ndarray)  : data array (implicit)
filtr (ndarray)  : Fourier space filter (1D - 3D)
epsilon          : regularization parameter
axes             : list of axes to apply deconvolution to.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.deconvolve_kernel">
<code class="descclassname">flexdata.data.</code><code class="descname">deconvolve_kernel</code><span class="sig-paren">(</span><em>array</em>, <em>kernel</em>, <em>epsilon</em>, <em>axes=(0</em>, <em>2)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#deconvolve_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.deconvolve_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse convolution with Tikhonov regularization.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>array (ndarray)  : data array (implicit)
filtr (ndarray)  : Fourier space filter (1D - 3D)
epsilon          : regularization parameter
axes             : list of axes to apply deconvolution to.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.divergence">
<code class="descclassname">flexdata.data.</code><code class="descname">divergence</code><span class="sig-paren">(</span><em>array, axes=[0, 1, 2]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#divergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.divergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the divergence of an array.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>axes   : list of axes where the divergence is applied.</dd>
<dt>Returns:</dt>
<dd>ndarray: divergence of the input array</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.file_to_dictionary">
<code class="descclassname">flexdata.data.</code><code class="descname">file_to_dictionary</code><span class="sig-paren">(</span><em>file_path</em>, <em>separator=':'</em>, <em>translation=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#file_to_dictionary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.file_to_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a text file and return a dictionary with records.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>file_path (str): file to read
separator (str): separator between the keys and values
translation (dict): dictionary for translating initial keys to a new naming</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.flipdim">
<code class="descclassname">flexdata.data.</code><code class="descname">flipdim</code><span class="sig-paren">(</span><em>array, transpose=[1, 0, 2], updown=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#flipdim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.flipdim" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a given numpy array (sorted: index, hor, vert) to ASTRA-compatible projections stack</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.free_disk">
<code class="descclassname">flexdata.data.</code><code class="descname">free_disk</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#free_disk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.free_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Return amount of free memory on disk in GB.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>percent (bool): percentage of the total or in GB.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.free_memory">
<code class="descclassname">flexdata.data.</code><code class="descname">free_memory</code><span class="sig-paren">(</span><em>percent=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#free_memory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.free_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return amount of free RAM memory in GB.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>percent (bool): percentage of the total or in GB.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.get_files_sorted">
<code class="descclassname">flexdata.data.</code><code class="descname">get_files_sorted</code><span class="sig-paren">(</span><em>path</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#get_files_sorted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.get_files_sorted" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort file entries using the natural (human) sorting</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.get_folders_sorted">
<code class="descclassname">flexdata.data.</code><code class="descname">get_folders_sorted</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#get_folders_sorted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.get_folders_sorted" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all paths from a path with a star (using glob)</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.gradient">
<code class="descclassname">flexdata.data.</code><code class="descname">gradient</code><span class="sig-paren">(</span><em>array, axes=[0, 1, 2]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#gradient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.gradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the gradient of an array.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>axes   : list of axes to apply gradient to.</dd>
<dt>Returns:</dt>
<dd>ndarray: shape = (3, k, l, m) where k,l,m - dimensions of the input array.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="flexdata.data.logger">
<em class="property">class </em><code class="descclassname">flexdata.data.</code><code class="descname">logger</code><a class="reference internal" href="_modules/flexdata/data.html#logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for logging and printing messages.</p>
<dl class="staticmethod">
<dt id="flexdata.data.logger.error">
<em class="property">static </em><code class="descname">error</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#logger.error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.logger.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an error.</p>
</dd></dl>

<dl class="attribute">
<dt id="flexdata.data.logger.file">
<code class="descname">file</code><em class="property"> = ''</em><a class="headerlink" href="#flexdata.data.logger.file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="flexdata.data.logger.print">
<em class="property">static </em><code class="descname">print</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#logger.print"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.logger.print" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply prints and saves a message.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="flexdata.data.logger.title">
<em class="property">static </em><code class="descname">title</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#logger.title"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.logger.title" title="Permalink to this definition">¶</a></dt>
<dd><p>Print something important.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="flexdata.data.logger.warning">
<em class="property">static </em><code class="descname">warning</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#logger.warning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.logger.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a warning.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="flexdata.data.medipix2astra">
<code class="descclassname">flexdata.data.</code><code class="descname">medipix2astra</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#medipix2astra"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.medipix2astra" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a given numpy array (sorted: index, hor, vert) to ASTRA-compatible projections stack</p>
</dd></dl>

<dl class="class">
<dt id="flexdata.data.memmap">
<em class="property">class </em><code class="descclassname">flexdata.data.</code><code class="descname">memmap</code><a class="reference internal" href="_modules/flexdata/data.html#memmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.memmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.core.memmap.memmap</span></code></p>
<p>Standard memmaps don’t seem to reliably delete files that are created on disk.
This fixes it…</p>
<dl class="method">
<dt id="flexdata.data.memmap.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#memmap.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.memmap.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="flexdata.data.mult_dim">
<code class="descclassname">flexdata.data.</code><code class="descname">mult_dim</code><span class="sig-paren">(</span><em>array_1</em>, <em>array_2</em>, <em>dim=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#mult_dim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.mult_dim" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply a 3D array by a 1D or a 2D vector along one of the dimensions.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.pad">
<code class="descclassname">flexdata.data.</code><code class="descname">pad</code><span class="sig-paren">(</span><em>array</em>, <em>dim</em>, <em>width</em>, <em>mode='edge'</em>, <em>geometry=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad an array along a given dimension.
numpy.pad seems to be very memory hungry! Don’t use it for large arrays.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>array: input array
dim  : dim to apply the ramp
width: width of the ramp
mode :’linear’ - creates linear decay of intensity; ‘edge’ - smears data in a costant manner; ‘zero’ - sets values to zeroes.
geometry: geometry record to update (updates detector offset).</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.ramp">
<code class="descclassname">flexdata.data.</code><code class="descname">ramp</code><span class="sig-paren">(</span><em>array</em>, <em>dim</em>, <em>width</em>, <em>mode='linear'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#ramp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.ramp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create ramps at the ends of the array (without changing its size).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>array: input array
dim  : dim to apply the ramp
width: width of the ramp
mode :’linear’ - creates linear decay of intensity; ‘edge’ - smears data in a costant manner; ‘zero’ - sets values to zeroes.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.raw2astra">
<code class="descclassname">flexdata.data.</code><code class="descname">raw2astra</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#raw2astra"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.raw2astra" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a given numpy array (sorted: index, hor, vert) to ASTRA-compatible projections stack</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_flexray">
<code class="descclassname">flexdata.data.</code><code class="descname">read_flexray</code><span class="sig-paren">(</span><em>path</em>, <em>sample=1</em>, <em>skip=1</em>, <em>memmap=None</em>, <em>proj_number=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_flexray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_flexray" title="Permalink to this definition">¶</a></dt>
<dd><p>Read projecition data for the FLex-Ray scaner. Read, dark-, flat-field images and scan parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path   (str): path to flexray data.
skip   (int): read every ## image
sample (int): keep every ## x ## pixel
memmap (str): output a memmap array using the given path
proj_number (int): force projection number (treat lesser numbers as missing)</dd>
<dt>Returns:</dt>
<dd>proj (numpy.array): projections stack
flat (numpy.array): reference flat field images
dark (numpy.array): dark field images
geom (geometry)   : description of the geometry, physical settings and comments</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_flexraylog">
<code class="descclassname">flexdata.data.</code><code class="descname">read_flexraylog</code><span class="sig-paren">(</span><em>path</em>, <em>sample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_flexraylog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_flexraylog" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the log file of FLexRay scanner and return dictionaries with parameters of the scan.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path   (str): path to the files location
sample (int): subsampling of the input data</dd>
<dt>Returns:</dt>
<dd>geometry    : circular geometry class</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_flexraymeta">
<code class="descclassname">flexdata.data.</code><code class="descname">read_flexraymeta</code><span class="sig-paren">(</span><em>path</em>, <em>sample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_flexraymeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_flexraymeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the metafile produced by Flexray scripting.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path   (str): path to the files location
sample (int): subsampling of the input data</dd>
<dt>Returns:</dt>
<dd>geometry    : circular geometry class</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_geometry">
<code class="descclassname">flexdata.data.</code><code class="descname">read_geometry</code><span class="sig-paren">(</span><em>path</em>, <em>sample=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_geometry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a native meta file.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path   (str): path to the file location
sample (int): subsampling of the input data</dd>
<dt>Returns:</dt>
<dd>geometry    : circular geometry class</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_image">
<code class="descclassname">flexdata.data.</code><code class="descname">read_image</code><span class="sig-paren">(</span><em>file</em>, <em>sample=1</em>, <em>shape=None</em>, <em>format=None</em>, <em>dtype=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a single image. Use sampling and roi parameters to reduce the array size.
Use shape, format and dtype to force file reading settings.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_stack">
<code class="descclassname">flexdata.data.</code><code class="descname">read_stack</code><span class="sig-paren">(</span><em>path, name, skip=1, sample=1, shape=None, dtype=None, format=None, transpose=[1, 0, 2], updown=True, memmap=None, success=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Read stack of files and return a numpy array.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path (str): path to the files location
name (str): common part of the files name
skip (int): read every so many files
sample (int): sampling factor in x/y direction
shape (array): shape of the files. Use it when the format is ‘raw’.
dtype (str or numpy.dtype): data type of the files
format (str): file format (‘tif’, ‘raw’, etc)
flipdim (bool): apply dimension switch for ASTRA compatibility
memmap (str): if provided, return a disk mapped array to save RAM
success(array): map of the files that could be loaded (equals 0 in case of a read failure)</dd>
<dt>Returns:</dt>
<dd>numpy.array : 3D array with the first dimension representing the image index</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.read_toml">
<code class="descclassname">flexdata.data.</code><code class="descname">read_toml</code><span class="sig-paren">(</span><em>file_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#read_toml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.read_toml" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a toml file.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>file_path (str): read file form that location</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.rewrite_memmap">
<code class="descclassname">flexdata.data.</code><code class="descname">rewrite_memmap</code><span class="sig-paren">(</span><em>old_array</em>, <em>new_array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#rewrite_memmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.rewrite_memmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshaping memmaps is tough. We will recreate one instead hoping that this will not overflow our RAM…
This is a dirty qick fix! Try to use resize instead!</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.shape_alike">
<code class="descclassname">flexdata.data.</code><code class="descname">shape_alike</code><span class="sig-paren">(</span><em>array_1</em>, <em>array_2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#shape_alike"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.shape_alike" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Make sure two arrays have the same shape by padding either array_1 or array_2:</dt>
<dd>Returns: array1, array2 - reshaped.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.stack_shape">
<code class="descclassname">flexdata.data.</code><code class="descname">stack_shape</code><span class="sig-paren">(</span><em>path</em>, <em>name</em>, <em>skip=1</em>, <em>sample=1</em>, <em>shape=None</em>, <em>dtype=None</em>, <em>format=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#stack_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.stack_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the shape of stack on disk.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path (str): path to the files location
name (str): common part of the files name
skip (int): read every so many files
sample (int): sampling factor in x/y direction
shape (array): shape of the files. Use it when the format is ‘raw’.
dtype (str or numpy.dtype): data type of the files
format (str): file format (‘tif’, ‘raw’, etc)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.write_astra">
<code class="descclassname">flexdata.data.</code><code class="descname">write_astra</code><span class="sig-paren">(</span><em>filename</em>, <em>data_shape</em>, <em>geom</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#write_astra"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.write_astra" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an astra-readable projection geometry vector.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.write_image">
<code class="descclassname">flexdata.data.</code><code class="descname">write_image</code><span class="sig-paren">(</span><em>filename</em>, <em>image</em>, <em>compress=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#write_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.write_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a single image. Use compression if needed (0-9).</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.write_stack">
<code class="descclassname">flexdata.data.</code><code class="descname">write_stack</code><span class="sig-paren">(</span><em>path</em>, <em>name</em>, <em>data</em>, <em>dim=1</em>, <em>skip=1</em>, <em>dtype=None</em>, <em>zip=False</em>, <em>format='tiff'</em>, <em>updown=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#write_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.write_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an image stack.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>path (str): destination path
name (str): first part of the files name
data (numpy.array): data to write
dim (int): dimension along which array is separated into images
skip (int): how many images to skip in between
dtype (type): forse this data type
compress (str): use None, ‘zip’ or ‘jp2’.
format (str): file extension (‘raw’, ‘tiff’, ‘jp2’, etc)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flexdata.data.write_toml">
<code class="descclassname">flexdata.data.</code><code class="descname">write_toml</code><span class="sig-paren">(</span><em>filename</em>, <em>record</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/data.html#write_toml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.data.write_toml" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a toml file.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>filename (str): location to write the file to
record (dict, geometry): geomety class record or an arbitrary dictionary</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-flexdata.display">
<span id="flexdata-display-module"></span><h2>flexdata.display module<a class="headerlink" href="#module-flexdata.display" title="Permalink to this headline">¶</a></h2>
<p>This module contains a few simple routines for displaying data:
* 2D displays like: slice, projection, etc.
* Interactive slicer: pyqt_graph
* Other displays: mesh, color_project</p>
<dl class="function">
<dt id="flexdata.display.color_project">
<code class="descclassname">flexdata.display.</code><code class="descname">color_project</code><span class="sig-paren">(</span><em>array, dim=1, sample=2, bounds=[0.01, 0.1], title=None, cmap='nipy_spectral', file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#color_project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.color_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pseudo color projection of a 3D volume.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.max_projection">
<code class="descclassname">flexdata.display.</code><code class="descname">max_projection</code><span class="sig-paren">(</span><em>array</em>, <em>dim=0</em>, <em>bounds=None</em>, <em>title=None</em>, <em>cmap='gray'</em>, <em>file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#max_projection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.max_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Projection of maximum values.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.mesh">
<code class="descclassname">flexdata.display.</code><code class="descname">mesh</code><span class="sig-paren">(</span><em>stl_mesh</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#mesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Display an stl mesh. Use flexCompute.generate_stl(volume) to generate mesh.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.min_projection">
<code class="descclassname">flexdata.display.</code><code class="descname">min_projection</code><span class="sig-paren">(</span><em>array</em>, <em>dim=0</em>, <em>title=None</em>, <em>cmap='gray'</em>, <em>file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#min_projection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.min_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Projection of minimum values.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.plot">
<code class="descclassname">flexdata.display.</code><code class="descname">plot</code><span class="sig-paren">(</span><em>x</em>, <em>y=None</em>, <em>semilogy=False</em>, <em>title=None</em>, <em>legend=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>A standard 2D plot.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.plot2d">
<code class="descclassname">flexdata.display.</code><code class="descname">plot2d</code><span class="sig-paren">(</span><em>x</em>, <em>y=None</em>, <em>semilogy=False</em>, <em>title=None</em>, <em>legend=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#plot2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.plot2d" title="Permalink to this definition">¶</a></dt>
<dd><p>A standard 2D plot.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.plot3d">
<code class="descclassname">flexdata.display.</code><code class="descname">plot3d</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em>, <em>connected=False</em>, <em>title=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#plot3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.plot3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a 3D line or a scatter plot.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.projection">
<code class="descclassname">flexdata.display.</code><code class="descname">projection</code><span class="sig-paren">(</span><em>array</em>, <em>dim=1</em>, <em>bounds=None</em>, <em>title=None</em>, <em>cmap='gray'</em>, <em>file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#projection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.projection" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple projection of the volume along one of the dimensions.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.pyqt_graph">
<code class="descclassname">flexdata.display.</code><code class="descname">pyqt_graph</code><span class="sig-paren">(</span><em>array</em>, <em>dim=0</em>, <em>title=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#pyqt_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.pyqt_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a PYQT window to display a 3D arrayset.</p>
</dd></dl>

<dl class="function">
<dt id="flexdata.display.slice">
<code class="descclassname">flexdata.display.</code><code class="descname">slice</code><span class="sig-paren">(</span><em>array</em>, <em>index=None</em>, <em>dim=0</em>, <em>bounds=None</em>, <em>title=None</em>, <em>cmap='gray'</em>, <em>file=None</em>, <em>cbar=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/flexdata/display.html#slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#flexdata.display.slice" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="readme.html" class="btn btn-neutral float-left" title="flexDATA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Author

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>